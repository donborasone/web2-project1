<html>
    <head>
        <meta charset="utf-8">
        <meta name="robots" content="noindex, nofollow">
        <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css"
            integrity="sha512-xodZBNTC5n17Xt2atTPuE1HxjVMSvLVW9ocqUKLsCC5CXdbqCmblAshOMAS6/keqq/sMZMZ19scR4PsZChSR7A=="
            crossorigin=""/>
        <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"
            integrity="sha512-XQoYMqMTK8LvdxXYG3nZ448hOEQiglfqkJs1NOQV44cWnUrBc8PkAOcXy20w0vlaXaVUearIOBhiXZ5V3ynxwA=="
            crossorigin=""></script>
        <title>Welcome!</title>
      </head>
    <body>
        <p id = "status"></p>
        <p id = "coords"></p>
        <br/>
        <div id="map" style="height: 400px;"></div>
        <script>
            
            const status = document.querySelector('#status');
            const coords = document.querySelector('#coords');

            function success(position) {
                const latitude  = position.coords.latitude;
                const longitude = position.coords.longitude;

                status.textContent = 'Found you!';
                coords.textContent = `Latitude: ${latitude} °, Longitude: ${longitude} °`;

                var mymap = L.map('map').setView([latitude, longitude], 17);
                var marker = L.marker([latitude, longitude]).addTo(mymap);
                marker.bindPopup("<b>Vaša lokacija</b>")

                L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png?{foo}', {   
                    foo: 'bar', 
                    attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
                    }).addTo(mymap);
            }

            function error() {
                status.textContent = 'Unable to retrieve your location';
            }

            if(!navigator.geolocation) {
                status.textContent = 'Geolocation is not supported by your browser';
            } else {
                status.textContent = 'Click anywhere to get your location!';
                navigator.geolocation.getCurrentPosition(success, error);
            }
        </script>
    </body>
</html>